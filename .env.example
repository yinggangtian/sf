# ==================== 应用基础配置 ====================
APP_NAME=玄学大师AI Agent
ENVIRONMENT=development
DEBUG=true

# ==================== 数据库配置 (PostgreSQL + pgvector) ====================
# 完整连接URL格式（推荐）
DATABASE_URL=postgresql://postgres:your_password@localhost:5432/xiaoliuren

# 或分开配置
DB_HOST=localhost
DB_PORT=5432
DB_NAME=xiaoliuren
DB_USER=postgres
DB_PASSWORD=your_password
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_ECHO=false

# ==================== Redis 缓存配置 ====================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_TIMEOUT=5

# 缓存 TTL 配置（秒）
KB_CACHE_TTL=3600
USER_CACHE_TTL=1800
API_CACHE_TTL=300
ENABLE_CACHE=true

# ==================== OpenAI 配置 ====================
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-4o
OPENAI_TEMPERATURE=0.7
OPENAI_TIMEOUT=30

# ==================== RAG 配置 ====================
EMBEDDING_MODEL=text-embedding-3-large
RAG_TOP_K=5
RAG_SCORE_THRESHOLD=0.7
RAG_TIMEOUT=10

# ==================== JWT 认证配置 ====================
# 警告：生产环境必须更改此密钥！建议使用 openssl rand -hex 32 生成
JWT_SECRET_KEY=your-secret-key-here
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=1440

# ==================== Celery 配置 ====================
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0

# ==================== 日志配置 ====================
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=
ENABLE_LOGGING=true

# ==================== 监控配置 ====================
ENABLE_METRICS=false
ENABLE_TRACING=false

# ==================== XLR 算法配置 ====================
# 有效报数范围（逗号分隔）
VALID_NUMBERS=1,2,3,4,5,6

# 有效问题类型（逗号分隔）
VALID_QUESTION_TYPES=事业,财运,感情,健康,学业,出行,官司,寻物,通用

# 有效性别（逗号分隔）
VALID_GENDERS=男,女

# 默认问题类型
DEFAULT_QUESTION_TYPE=通用

# 寻物描述最大长度
MAX_ITEM_DESCRIPTION_LENGTH=200

# 用户最大占卜记录数
MAX_RECORDS_PER_USER=1000

# 解卦结果缓存时间（小时）
INTERPRETATION_CACHE_HOURS=24

# ==================== API 配置 ====================
API_RATE_LIMIT=100
API_TIMEOUT=30
CORS_ORIGINS=*
